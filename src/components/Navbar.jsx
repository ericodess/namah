import React, {
    useEffect,
    useState,
    useLayoutEffect
} from 'react';
import {withRouter} from 'react-router-dom';

//Components
import {
    CartStatus,
    HamburguerMenu
} from './index';
import NavbarLink from './NavbarLink';
import NavbarBrand from './NavbarBrand';

//Services
import {
    getCurrentPageURIManual,
    getCurrentPageType,
    translatePageType,
    moveInArray,
    renderSearchModal
} from '../services';

const Navbar = (props) => {
    const [activeNavLink,setActiveNavLink] = useState();
    const [size, setSize] = useState([0, 0]);
    const [isNavbarConverted, setIsNavbarConverted] = useState(false);
    const [, updateState] = React.useState();
    const forceUpdate = React.useCallback(() => updateState({}), []);

    useLayoutEffect(() => {
        const updateSize = () => {
            setSize([window.innerWidth, window.innerHeight]);
        }
            window.addEventListener('resize', updateSize);
            updateSize();
            return () => window.removeEventListener('resize', updateSize);
    }, []);

    useEffect(() => {
        setActiveNavLink(translatePageType(getCurrentPageType(getCurrentPageURIManual(props.location.pathname + props.location.search))));

        if(document.getElementById('hamburguer-menu') === null){
            forceUpdate();
        }else{
            document.getElementById('hamburguer-menu').classList.remove('--is-active');
            document.getElementById('hamburguer-menu-items').style.display = 'none';

            document.getElementById('logout-redirector').style.display = !window.sessionStorage.getItem('isLoggedIn') ? 'none' : 'initial';

            if(size[0] > 0 && size[0] <= 801){
                if(!isNavbarConverted){    
                    convertNavbarToMobile();
                }
            }else{ 
                if(isNavbarConverted){
                    convertNavbarToDesktop();
                }
            }
        }
    },[setActiveNavLink,props.location,size,isNavbarConverted,forceUpdate]);

    const convertNavbarToMobile = () => {
        const redirectorViewsElement = document.getElementById('redirectors-views');
        const hamburguerItemsElement = document.getElementById('hamburguer-menu-items');

        while(redirectorViewsElement.childNodes.length > 0){
            hamburguerItemsElement.appendChild(redirectorViewsElement.childNodes[0]);
        };

        const redirectorMiscElement = document.getElementById('redirectors-misc');
        const hamburguerMenuMiscListElement = document.getElementById('hamburguer-menu-misc-items') ?? (() => {
            const newElement = document.createElement("ul");

            newElement.setAttribute('id', 'hamburguer-menu-misc-items');
            newElement.classList.add('hamburguer-menu__misc-items');

            return newElement;
        })();
    

        while(redirectorMiscElement.childNodes.length > 4){
            for(let i = 0; i < redirectorMiscElement.childNodes.length; i++){
                if(redirectorMiscElement.childNodes[i].id !== 'login-redirector' && redirectorMiscElement.childNodes[i].id !== 'wishlist-redirector'
                && redirectorMiscElement.childNodes[i].id !== 'cart-redirector' && redirectorMiscElement.childNodes[i].id !== 'hamburguer-menu'){
                    hamburguerMenuMiscListElement.appendChild(redirectorMiscElement.childNodes[i]);
                }
            }
        }
        
        if(hamburguerItemsElement.lastChild.id !== 'hamburguer-menu-misc-items'){
            hamburguerItemsElement.appendChild(hamburguerMenuMiscListElement);
        }

        setIsNavbarConverted(true);        
    };

    const convertNavbarToDesktop = () => {
        const hamburguerItemsElement = document.getElementById('hamburguer-menu-items');
        const hamburguerMenuMiscListElement = document.getElementById('hamburguer-menu-misc-items');
        const redirectorViewsElement = document.getElementById('redirectors-views');
        const redirectorMiscElement = document.getElementById('redirectors-misc');
        
        let redirectorMiscElementChildren = [];

        //Re-inserting elements to the redirector-view
        while(hamburguerItemsElement.childNodes.length > 0){
            redirectorViewsElement.appendChild(hamburguerItemsElement.childNodes[0]);  
        };
        //Re-inserting elements to the redirector-view-misc
        while(hamburguerMenuMiscListElement.childNodes.length > 0){
            redirectorMiscElement.appendChild(hamburguerMenuMiscListElement.childNodes[0]);
        }
        //Copying redirector-view-misc elements
        for(let i = 0; i < redirectorMiscElement.childNodes.length; i++){
            redirectorMiscElementChildren.push(redirectorMiscElement.childNodes[i]);
        }
        /**
         * Sorting redirectorMiscElementChildren elements to the initial design
         * When re-inserting the hamburguer-misc menu items buttons get unordered,
         * compared to the original design.
         */
        moveInArray(redirectorMiscElementChildren, redirectorMiscElementChildren.indexOf(redirectorMiscElementChildren.find(element => element.id === 'search-redirector')), 0)
        moveInArray(redirectorMiscElementChildren, redirectorMiscElementChildren.indexOf(redirectorMiscElementChildren.find(element => element.id === 'orders-redirector')), 2)
        moveInArray(redirectorMiscElementChildren, redirectorMiscElementChildren.indexOf(redirectorMiscElementChildren.find(element => element.id === 'hamburguer-menu')), redirectorMiscElement.childNodes.length - 1)
        //Replacing redirector-view-misc elements with the sorted ones
        redirectorMiscElementChildren.forEach(element => {
            redirectorMiscElement.appendChild(element); 
        });

        setIsNavbarConverted(false);
    };

    const navbarLinkUpdate = (navLinkRedirect) => {
        setActiveNavLink(navLinkRedirect);
    };
    
    return(
        <nav className="navbar">
            <div className="navbar__buttons">
                <ul
                    id="redirectors-views"
                    className="navbar__redirectors"
                >
                    <NavbarLink
                        redirector='home'
                        clickHandle={navbarLinkUpdate}
                        isActive={activeNavLink === 'home'}
                    >
                        HOME
                    </NavbarLink>
                    <NavbarLink 
                        redirector='blog'
                        clickHandle={navbarLinkUpdate}
                        isActive={activeNavLink === 'blog'}
                    >
                        BLOG
                    </NavbarLink>
                    <NavbarLink 
                        redirector='store'
                        clickHandle={navbarLinkUpdate}
                        isActive={activeNavLink === 'store'}
                    >
                        STORE
                    </NavbarLink>
                    <NavbarLink 
                        redirector='podcasts'
                        clickHandle={navbarLinkUpdate}
                        isActive={activeNavLink === 'podcasts'}
                    >
                        PODCASTS
                    </NavbarLink>
                    <NavbarLink 
                        redirector='courses'
                        clickHandle={navbarLinkUpdate}
                        isActive={activeNavLink === 'courses'}
                    >
                        COURSES
                    </NavbarLink>
                    <NavbarLink 
                        redirector='contact'
                        clickHandle={navbarLinkUpdate}
                        isActive={activeNavLink === 'contact'}
                    >
                        CONTACT
                    </NavbarLink>
                </ul>
                <NavbarBrand>
                    <svg
                        viewBox="0 0 138 66"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            d="M138 40.5553C137.546 41.1414 137.136 41.7493 136.618 42.2704C135.43 43.5079 134.113 44.702 132.256 44.1809C130.248 43.5947 129.751 41.8362 129.6 39.9474C129.384 37.125 129.19 34.2809 128.996 31.4585C128.931 30.373 128.823 29.2441 127.592 28.8967C126.491 28.5711 125.865 29.4829 125.325 30.2428C123.77 32.4789 122.28 34.7803 120.769 37.0382C120.013 38.1888 119.214 39.2743 117.983 39.9691C115.91 41.1414 114.334 40.6638 113.492 38.4059C112.866 36.7125 112.693 34.9322 112.693 33.1303C112.693 25.6618 112.672 18.1934 112.607 10.725C112.585 9.35723 112.456 7.98947 112.24 6.64342C111.657 2.97434 111.095 2.73553 107.964 4.81974C107.532 5.10197 107.122 5.64474 106.626 5.25395C106.043 4.77631 106.194 4.05987 106.626 3.56052C108.094 1.82368 109.368 -0.434211 112.132 0.0434203C114.593 0.477631 114.874 2.71381 115.133 4.68947C115.932 10.877 115.349 17.0862 115.5 23.2737C115.587 26.8559 115.543 30.4164 115.608 33.9987C115.63 35.171 115.867 36.4737 117.055 36.9296C118.48 37.4724 119.063 36.0829 119.689 35.2145C121.395 32.8263 122.993 30.3513 124.656 27.9197C125.757 26.2914 127.031 24.7717 129.255 25.4664C131.457 26.1395 131.695 28.1586 131.803 30.0908C131.954 32.5007 131.803 34.9539 132.148 37.3204C132.71 41.1849 133.833 41.5322 136.899 39.1441C137.223 38.9053 137.633 38.7967 138 38.623C138 39.296 138 39.9257 138 40.5553Z"
                            fill="black"
                        />
                        <path
                            d="M31.6551 60.8763C30.813 63.5033 29.3015 64.9796 27.4013 65.7178C25.0261 66.6513 23.5362 65.175 23.0828 62.9388C22.6509 60.7895 22.435 58.575 22.4134 56.3822C22.327 49.348 22.3918 42.2921 22.3702 35.2579C22.3702 33.7816 22.2838 32.3053 22.1327 30.8507C22.0463 29.9822 21.7008 29.1572 20.7939 28.8967C19.8438 28.6145 19.196 29.2658 18.6994 29.9605C17.4038 31.871 16.173 33.825 14.8775 35.7355C14.1217 36.8645 13.4092 38.0368 12.5022 39.0355C11.509 40.1428 10.2566 41.0112 8.61553 40.4684C7.01766 39.9474 6.34828 38.6013 6.19713 37.0816C5.9812 35.1059 5.95961 33.1085 5.89483 31.1112C5.72209 24.7934 5.0743 24.3592 -2.25047e-05 27.1599C-0.0216154 24.7283 2.13767 21.8408 4.36174 21.6888C7.10403 21.4934 7.77341 23.4691 8.27005 25.6835C8.87465 28.4842 8.61553 31.35 8.80987 34.1724C8.89624 35.3447 8.98261 36.6474 10.2998 37.0382C11.5306 37.4072 12.1568 36.2783 12.7398 35.4316C14.2729 33.1737 15.7196 30.8507 17.2527 28.6145C18.5051 26.7691 19.8654 24.7066 22.4997 25.5316C24.9397 26.2914 25.0693 28.6796 25.0909 30.7855C25.1773 38.4493 25.1557 46.1349 25.1773 53.7987C25.1773 54.8408 25.1557 55.9046 25.1989 56.9467C25.3716 62.4395 26.3433 63.1125 31.6551 60.8763Z"
                            fill="black"
                        />
                        <path
                            d="M48.1736 27.3118C48.4112 26.2697 49.1021 25.8138 49.9227 25.5316C51.2614 25.0539 52.1683 25.6618 52.7297 26.8342C53.7014 28.875 53.9173 31.0678 53.9389 33.2822C53.9605 34.7151 53.6582 36.5605 55.472 37.0164C57.1131 37.4507 57.6961 35.7355 58.4303 34.65C59.9634 32.3921 61.3237 30.0039 62.9 27.7895C63.9364 26.3132 65.2752 24.9671 67.3265 25.423C69.637 25.9441 69.8745 28.0066 70.1336 29.8737C70.3495 31.4368 70.2416 33.0434 70.4791 34.5849C70.6302 35.5618 70.8246 36.7993 72.1201 37.0164C73.243 37.2118 73.8044 36.2783 74.3226 35.5184C75.8989 33.1737 77.3888 30.7421 78.9651 28.3974C80.1527 26.6171 81.4698 24.7717 83.9746 25.4664C86.5442 26.1612 86.6089 28.4408 86.6521 30.5901C86.6737 32.0664 86.6737 33.5428 86.7169 35.0191C86.7385 35.996 86.976 36.8862 87.7102 37.5809C88.2284 38.0803 89.6535 37.6895 89.2865 39.0572C89.0705 39.8171 88.3148 40.121 87.5806 40.3164C86.5226 40.5987 85.702 40.0776 85.1838 39.2309C83.9962 37.3638 84.2985 35.171 83.9098 33.1303C83.6291 31.6757 84.4713 29.5697 82.5495 28.9835C80.3902 28.3105 79.9583 30.6335 79.0514 31.9145C77.4536 34.1289 76.0716 36.4737 74.4306 38.6664C73.4805 39.9474 72.1849 41.0329 70.4143 40.5335C68.6221 40.0559 68.147 38.5362 67.9743 36.8645C67.8232 35.4099 67.6288 33.9553 67.4777 32.4789C67.3265 31.1329 67.4993 29.4178 65.9878 28.9618C64.2171 28.4191 63.5478 30.1993 62.7488 31.3717C61.6476 33.0217 60.6975 34.802 59.5963 36.452C58.9053 37.4941 58.128 38.5362 57.2211 39.3612C54.7379 41.5539 52.557 40.8592 51.6069 37.6678C51.1535 36.1263 51.2614 34.5414 51.1103 32.9783C50.8943 31.046 52.2547 28.2237 48.6271 27.9414C48.4328 27.9632 48.2816 27.5072 48.1736 27.3118Z"
                            fill="black"
                        />
                        <path
                            d="M108.029 29.2441C108.137 31.5671 106.712 32.7178 104.79 33.3257C103.214 33.825 101.551 34.1072 99.9318 34.5197C98.809 34.802 97.9236 35.4316 98.1396 36.7125C98.3771 38.102 99.4999 38.623 100.752 38.2757C101.94 37.95 103.041 37.2987 104.186 36.7776C104.639 36.5605 105.092 36.0829 105.589 36.5605C106.086 37.0382 105.697 37.5375 105.438 37.9717C103.991 40.4033 98.701 41.5105 96.369 39.8822C93.8858 38.1454 94.1017 34.6283 96.8656 33.1303C98.6362 32.175 100.623 31.8928 102.588 31.5237C103.926 31.2632 105.157 30.6336 104.682 29.027C104.25 27.5941 102.89 27.2901 101.573 27.7895C100.407 28.2237 99.3488 28.9401 98.2691 29.5263C97.8805 29.7217 97.4702 29.9388 97.1679 29.5046C97.0167 29.2875 96.9952 28.8967 97.0599 28.6362C97.427 26.9211 101.379 25.0105 104.034 25.2928C106.345 25.5316 107.856 26.7039 108.029 29.2441Z"
                            fill="black"
                        />
                        <path
                            d="M38.6296 25.2276C40.8537 25.4013 42.7323 26.1612 43.1425 28.7013C43.5312 31.0678 42.1924 32.5006 40.1195 33.2388C38.5432 33.7816 36.9022 34.0855 35.2611 34.4763C34.0087 34.7803 32.9939 35.3881 33.2962 36.821C33.6201 38.4059 34.9372 38.6447 36.2544 38.2105C37.334 37.8631 38.3057 37.2118 39.3422 36.7125C39.7956 36.4954 40.2491 35.996 40.7241 36.5171C41.1776 36.9947 40.8321 37.4941 40.573 37.95C39.0399 40.5335 33.5769 41.5539 31.2449 39.7302C28.9344 37.9283 29.3663 34.2592 32.1949 33.0217C33.8792 32.2835 35.801 32.0013 37.6363 31.5888C39.0183 31.2631 40.1195 30.6335 39.6661 29.0487C39.2342 27.5072 37.9171 27.4204 36.5783 27.8546C35.7794 28.1151 35.0452 28.5059 34.2679 28.8316C33.5985 29.0921 32.8643 30.3296 32.2165 29.1789C31.7415 28.3539 32.7132 27.6592 33.3394 27.1381C34.8725 25.8572 36.6431 25.2928 38.6296 25.2276Z"
                            fill="black"
                        />
                    </svg>
                </NavbarBrand>
                <ul
                    id="redirectors-misc"
                    className="navbar__redirectors --reverse"
                >
                    <NavbarLink 
                        redirector="search"
                        clickHandle={() => renderSearchModal('root')}
                        isActive={activeNavLink === "search"}
                    button>
                        <svg
                            viewBox="0 0 24 24"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M23.8594 22.5938C23.9531 22.6875 24 22.8281 24 22.9688C24 23.1562 23.9531 23.2969 23.8594 23.3906L23.3906 23.8125C23.25 23.9531 23.1094 24 22.9688 24C22.7812 24 22.6875 23.9531 22.5938 23.8125L16.5469 17.7656C16.4062 17.6719 16.3594 17.5781 16.3594 17.3906V16.9219C15.4688 17.7656 14.4375 18.375 13.3125 18.8438C12.1875 19.3125 10.9688 19.5 9.75 19.5C7.96875 19.5 6.32812 19.0781 4.82812 18.1875C3.32812 17.3438 2.15625 16.1719 1.3125 14.6719C0.421875 13.1719 0 11.5312 0 9.75C0 7.96875 0.421875 6.375 1.3125 4.875C2.15625 3.375 3.32812 2.20312 4.82812 1.3125C6.32812 0.46875 7.96875 0 9.75 0C11.5312 0 13.125 0.46875 14.625 1.3125C16.125 2.20312 17.2969 3.375 18.1875 4.875C19.0312 6.375 19.5 7.96875 19.5 9.75C19.5 11.0156 19.2656 12.2344 18.7969 13.3594C18.3281 14.4844 17.7188 15.5156 16.9219 16.3594H17.3906C17.5312 16.3594 17.6719 16.4531 17.8125 16.5469L23.8594 22.5938ZM9.75 18C11.25 18 12.6094 17.6719 13.875 16.9219C15.1406 16.1719 16.125 15.1875 16.875 13.9219C17.625 12.6562 18 11.25 18 9.75C18 8.25 17.625 6.89062 16.875 5.625C16.125 4.35938 15.1406 3.375 13.875 2.625C12.6094 1.875 11.25 1.5 9.75 1.5C8.25 1.5 6.84375 1.875 5.57812 2.625C4.3125 3.375 3.32812 4.35938 2.57812 5.625C1.82812 6.89062 1.5 8.25 1.5 9.75C1.5 11.25 1.82812 12.6562 2.57812 13.9219C3.32812 15.1875 4.3125 16.1719 5.57812 16.9219C6.84375 17.6719 8.25 18 9.75 18Z"
                                fill="#666666"
                            />
                        </svg>
                    </NavbarLink>
                    <NavbarLink 
                        redirector={window.sessionStorage.getItem('loggedUser') === null ? 'login' : `user/${window.sessionStorage.getItem('loggedUser')}`}
                        clickHandle={navbarLinkUpdate}
                        isActive={activeNavLink === (window.sessionStorage.getItem('loggedUser') === null ? 'login' : 'user')}
                    >
                        <svg
                            viewBox="0 0 24 24"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M12 0.375C14.0625 0.375 16.0312 0.9375 17.8125 1.96875C19.5938 3 21 4.40625 22.0312 6.1875C23.0625 7.96875 23.625 9.9375 23.625 12C23.625 14.1094 23.0625 16.0312 22.0312 17.8125C21 19.5938 19.5938 21.0469 17.8125 22.0781C16.0312 23.1094 14.0625 23.625 12 23.625C9.89062 23.625 7.96875 23.1094 6.1875 22.0781C4.40625 21.0469 2.95312 19.5938 1.92188 17.8125C0.890625 16.0312 0.375 14.1094 0.375 12C0.375 9.9375 0.890625 7.96875 1.92188 6.1875C2.95312 4.40625 4.40625 3 6.1875 1.96875C7.96875 0.9375 9.89062 0.375 12 0.375ZM12 1.875C10.125 1.875 8.4375 2.34375 6.89062 3.23438C5.34375 4.17188 4.125 5.39062 3.23438 6.9375C2.29688 8.53125 1.875 10.2188 1.875 12C1.875 14.1562 2.48438 16.0781 3.70312 17.8125C3.98438 16.9688 4.45312 16.2188 5.20312 15.6562C5.90625 15.0938 6.70312 14.7188 7.64062 14.625C6.51562 13.5 6 12.0938 6 10.5C6 9.42188 6.23438 8.4375 6.79688 7.5C7.3125 6.5625 8.01562 5.85938 8.95312 5.29688C9.89062 4.78125 10.875 4.5 12 4.5C13.0781 4.5 14.0625 4.78125 15 5.29688C15.9375 5.85938 16.6406 6.5625 17.2031 7.5C17.7188 8.4375 18 9.42188 18 10.5C18 12.0938 17.4375 13.5 16.3594 14.625C17.25 14.7188 18.0469 15.0938 18.7969 15.6562C19.5 16.2188 20.0156 16.9688 20.2969 17.8125C21.5156 16.0781 22.125 14.1562 22.125 12C22.125 10.1719 21.6562 8.48438 20.7656 6.9375C19.8281 5.39062 18.6094 4.17188 17.0625 3.23438C15.4688 2.34375 13.7812 1.875 12 1.875ZM7.5 10.5C7.5 11.7656 7.92188 12.8438 8.8125 13.6875C9.65625 14.5781 10.7344 15 12 15C13.2188 15 14.2969 14.5781 15.1875 13.6875C16.0312 12.8438 16.5 11.7656 16.5 10.5C16.5 9.28125 16.0312 8.20312 15.1875 7.3125C14.2969 6.46875 13.2188 6 12 6C10.7344 6 9.65625 6.46875 8.8125 7.3125C7.92188 8.20312 7.5 9.28125 7.5 10.5ZM5.01562 19.3125C6.28125 20.5312 7.78125 21.375 9.46875 21.7969C11.1562 22.2656 12.8438 22.2656 14.5312 21.7969C16.2188 21.375 17.6719 20.5312 18.9844 19.3125C18.9844 18.375 18.6562 17.5781 18.0938 17.0156C17.4844 16.4531 16.7812 16.125 15.9844 16.125H14.1094C13.4062 16.4062 12.7031 16.5 12 16.5C11.25 16.5 10.5469 16.4062 9.89062 16.125H8.01562C7.17188 16.125 6.51562 16.4062 5.95312 16.9688C5.29688 17.5781 5.01562 18.375 5.01562 19.3125Z"
                                fill="#666666"
                            />
                        </svg>
                    </NavbarLink>
                    <NavbarLink 
                        redirector="orders"
                        clickHandle={navbarLinkUpdate}
                        isActive={activeNavLink === "orders"}
                    disabled>
                        <svg
                            viewBox="0 0 28 28"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M19.25 10.9667L8.75 4.91167" 
                                stroke="#666666" 
                                strokeWidth="1.5" 
                                strokeLinecap="round" 
                                strokeLinejoin="round"
                            />
                            <path
                                d="M24.5 18.6667V9.33333C24.4996 8.92415 24.3916 8.52228 24.1868 8.16802C23.982 7.81377 23.6877 7.51959 23.3333 7.315L15.1667 2.64833C14.812 2.44354 14.4096 2.33573 14 2.33573C13.5904 2.33573 13.188 2.44354 12.8333 2.64833L4.66667 7.315C4.31231 7.51959 4.01798 7.81377 3.81321 8.16802C3.60843 8.52228 3.50042 8.92415 3.5 9.33333V18.6667C3.50042 19.0758 3.60843 19.4777 3.81321 19.832C4.01798 20.1862 4.31231 20.4804 4.66667 20.685L12.8333 25.3517C13.188 25.5565 13.5904 25.6643 14 25.6643C14.4096 25.6643 14.812 25.5565 15.1667 25.3517L23.3333 20.685C23.6877 20.4804 23.982 20.1862 24.1868 19.832C24.3916 19.4777 24.4996 19.0758 24.5 18.6667Z"
                                stroke="#666666"
                                strokeWidth="1.5"
                                strokeLinecap="round"
                                strokeLinejoin="round"
                            />
                            <path
                                d="M3.81494 8.12L13.9999 14.0117L24.1849 8.12"
                                stroke="#666666"
                                strokeWidth="1.5"
                                strokeLinecap="round" 
                                strokeLinejoin="round"
                            />
                            <path
                                d="M14 25.76V14"
                                stroke="#666666"
                                strokeWidth="1.5"
                                strokeLinecap="round"
                                strokeLinejoin="round"
                            />
                        </svg>
                    </NavbarLink>
                    <NavbarLink 
                        redirector="wishlist"
                        clickHandle={navbarLinkUpdate}
                        isActive={activeNavLink === "wishlist"}
                    >
                        <svg
                            viewBox="0 0 512 456" 
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M256 455.516C248.711 455.516 241.684 452.875 236.207 448.078C215.523 429.992 195.582 412.996 177.988 398.004L177.898 397.926C126.316 353.969 81.7734 316.008 50.7812 278.613C16.1367 236.809 0 197.172 0 153.871C0 111.801 14.4258 72.9883 40.6172 44.5781C67.1211 15.832 103.488 0 143.031 0C172.586 0 199.652 9.34375 223.477 27.7695C235.5 37.0703 246.398 48.4531 256 61.7305C265.605 48.4531 276.5 37.0703 288.527 27.7695C312.352 9.34375 339.418 0 368.973 0C408.512 0 444.883 15.832 471.387 44.5781C497.578 72.9883 512 111.801 512 153.871C512 197.172 495.867 236.809 461.223 278.609C430.23 316.008 385.691 353.965 334.117 397.918C316.492 412.934 296.52 429.957 275.789 448.086C270.316 452.875 263.285 455.516 256 455.516V455.516ZM143.031 29.9922C111.965 29.9922 83.4258 42.3906 62.6641 64.9062C41.5938 87.7617 29.9883 119.355 29.9883 153.871C29.9883 190.289 43.5234 222.859 73.8711 259.477C103.203 294.871 146.832 332.051 197.348 375.102L197.441 375.18C215.102 390.23 235.121 407.293 255.957 425.512C276.918 407.258 296.969 390.168 314.664 375.094C365.176 332.043 408.801 294.871 438.133 259.477C468.477 222.859 482.012 190.289 482.012 153.871C482.012 119.355 470.406 87.7617 449.336 64.9062C428.578 42.3906 400.035 29.9922 368.973 29.9922C346.215 29.9922 325.32 37.2266 306.871 51.4922C290.43 64.2109 278.977 80.2891 272.262 91.5391C268.809 97.3242 262.73 100.777 256 100.777C249.27 100.777 243.191 97.3242 239.738 91.5391C233.027 80.2891 221.574 64.2109 205.129 51.4922C186.68 37.2266 165.785 29.9922 143.031 29.9922V29.9922Z" 
                                fill="#666666"
                            />
                            <path 
                                d="M143.031 29.9922C111.965 29.9922 83.4258 42.3906 62.6641 64.9062C41.5938 87.7617 29.9883 119.355 29.9883 153.871C29.9883 190.289 43.5234 222.859 73.8711 259.477C103.197 294.864 146.815 332.036 197.318 375.076L197.348 375.102L197.441 375.18C215.102 390.23 235.121 407.293 255.957 425.512C276.918 407.258 296.969 390.168 314.664 375.094L314.801 374.977C365.255 331.976 408.827 294.839 438.133 259.477C468.477 222.859 482.012 190.289 482.012 153.871C482.012 119.355 470.406 87.7617 449.336 64.9062C428.578 42.3906 400.035 29.9922 368.973 29.9922C346.215 29.9922 325.32 37.2266 306.871 51.4922C290.43 64.2109 278.977 80.2891 272.262 91.5391C268.809 97.3242 262.73 100.777 256 100.777C249.27 100.777 243.191 97.3242 239.738 91.5391C233.027 80.2891 221.574 64.2109 205.129 51.4922C186.68 37.2266 165.785 29.9922 143.031 29.9922Z" 
                                fill='none'
                            />
                            <path 
                                d="M143.031 29.9922C111.965 29.9922 83.4258 42.3906 62.6641 64.9062C41.5938 87.7617 29.9883 119.355 29.9883 153.871C29.9883 190.289 43.5234 222.859 73.8711 259.477C103.197 294.864 146.815 332.036 197.318 375.076L197.348 375.102L197.441 375.18C215.102 390.23 235.121 407.293 255.957 425.512C276.918 407.258 296.969 390.168 314.664 375.094L314.801 374.977C365.255 331.976 408.827 294.839 438.133 259.477C468.477 222.859 482.012 190.289 482.012 153.871C482.012 119.355 470.406 87.7617 449.336 64.9062C428.578 42.3906 400.035 29.9922 368.973 29.9922C346.215 29.9922 325.32 37.2266 306.871 51.4922C290.43 64.2109 278.977 80.2891 272.262 91.5391C268.809 97.3242 262.73 100.777 256 100.777C249.27 100.777 243.191 97.3242 239.738 91.5391C233.027 80.2891 221.574 64.2109 205.129 51.4922C186.68 37.2266 165.785 29.9922 143.031 29.9922Z" 
                                fill='none' 
                            />
                            <path 
                                d="M143.031 29.9922C111.965 29.9922 83.4258 42.3906 62.6641 64.9062C41.5938 87.7617 29.9883 119.355 29.9883 153.871C29.9883 190.289 43.5234 222.859 73.8711 259.477C103.197 294.864 146.815 332.036 197.318 375.076L197.348 375.102L197.441 375.18C215.102 390.23 235.121 407.293 255.957 425.512C276.918 407.258 296.969 390.168 314.664 375.094L314.801 374.977C365.255 331.976 408.827 294.839 438.133 259.477C468.477 222.859 482.012 190.289 482.012 153.871C482.012 119.355 470.406 87.7617 449.336 64.9062C428.578 42.3906 400.035 29.9922 368.973 29.9922C346.215 29.9922 325.32 37.2266 306.871 51.4922C290.43 64.2109 278.977 80.2891 272.262 91.5391C268.809 97.3242 262.73 100.777 256 100.777C249.27 100.777 243.191 97.3242 239.738 91.5391C233.027 80.2891 221.574 64.2109 205.129 51.4922C186.68 37.2266 165.785 29.9922 143.031 29.9922Z" 
                                fill='none'
                            />
                            <path 
                                d="M143.031 29.9922C111.965 29.9922 83.4258 42.3906 62.6641 64.9062C41.5938 87.7617 29.9883 119.355 29.9883 153.871C29.9883 190.289 43.5234 222.859 73.8711 259.477C103.197 294.864 146.815 332.036 197.318 375.076L197.348 375.102L197.441 375.18C215.102 390.23 235.121 407.293 255.957 425.512C276.918 407.258 296.969 390.168 314.664 375.094L314.801 374.977C365.255 331.976 408.827 294.839 438.133 259.477C468.477 222.859 482.012 190.289 482.012 153.871C482.012 119.355 470.406 87.7617 449.336 64.9062C428.578 42.3906 400.035 29.9922 368.973 29.9922C346.215 29.9922 325.32 37.2266 306.871 51.4922C290.43 64.2109 278.977 80.2891 272.262 91.5391C268.809 97.3242 262.73 100.777 256 100.777C249.27 100.777 243.191 97.3242 239.738 91.5391C233.027 80.2891 221.574 64.2109 205.129 51.4922C186.68 37.2266 165.785 29.9922 143.031 29.9922Z" 
                                fill='none' 
                            />
                            <path 
                                d="M143.031 29.9922C111.965 29.9922 83.4258 42.3906 62.6641 64.9062C41.5938 87.7617 29.9883 119.355 29.9883 153.871C29.9883 190.289 43.5234 222.859 73.8711 259.477C103.197 294.864 146.815 332.036 197.318 375.076L197.348 375.102L197.441 375.18C215.102 390.23 235.121 407.293 255.957 425.512C276.918 407.258 296.969 390.168 314.664 375.094L314.801 374.977C365.255 331.976 408.827 294.839 438.133 259.477C468.477 222.859 482.012 190.289 482.012 153.871C482.012 119.355 470.406 87.7617 449.336 64.9062C428.578 42.3906 400.035 29.9922 368.973 29.9922C346.215 29.9922 325.32 37.2266 306.871 51.4922C290.43 64.2109 278.977 80.2891 272.262 91.5391C268.809 97.3242 262.73 100.777 256 100.777C249.27 100.777 243.191 97.3242 239.738 91.5391C233.027 80.2891 221.574 64.2109 205.129 51.4922C186.68 37.2266 165.785 29.9922 143.031 29.9922Z" 
                                fill='none'
                            />
                            <path 
                                d="M143.031 29.9922C111.965 29.9922 83.4258 42.3906 62.6641 64.9062C41.5938 87.7617 29.9883 119.355 29.9883 153.871C29.9883 190.289 43.5234 222.859 73.8711 259.477C103.197 294.864 146.815 332.036 197.318 375.076L197.348 375.102L197.441 375.18C215.102 390.23 235.121 407.293 255.957 425.512C276.918 407.258 296.969 390.168 314.664 375.094L314.801 374.977C365.255 331.976 408.827 294.839 438.133 259.477C468.477 222.859 482.012 190.289 482.012 153.871C482.012 119.355 470.406 87.7617 449.336 64.9062C428.578 42.3906 400.035 29.9922 368.973 29.9922C346.215 29.9922 325.32 37.2266 306.871 51.4922C290.43 64.2109 278.977 80.2891 272.262 91.5391C268.809 97.3242 262.73 100.777 256 100.777C249.27 100.777 243.191 97.3242 239.738 91.5391C233.027 80.2891 221.574 64.2109 205.129 51.4922C186.68 37.2266 165.785 29.9922 143.031 29.9922Z" 
                                fill='none'
                            />
                        </svg>
                    </NavbarLink>
                    <NavbarLink 
                        redirector="cart"
                        clickHandle={navbarLinkUpdate}
                        isActive={activeNavLink === "cart"}
                    >
                        <React.Fragment>
                            <CartStatus />
                            <svg
                                viewBox="0 0 27 22"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <path
                                    d="M26.4375 8C26.5781 8 26.7188 8.09375 26.8125 8.1875C26.9062 8.28125 27 8.42188 27 8.5625V8.9375C27 9.125 26.9062 9.26562 26.8125 9.35938C26.7188 9.45312 26.5781 9.5 26.4375 9.5H25.6875L24.2812 19.5781C24.1875 20.1406 23.9062 20.5625 23.4844 20.9375C23.0625 21.3125 22.5938 21.5 22.0312 21.5H4.96875C4.40625 21.5 3.89062 21.3125 3.46875 20.9375C3.04688 20.5625 2.8125 20.1406 2.71875 19.5781L1.3125 9.5H0.5625C0.375 9.5 0.234375 9.45312 0.140625 9.35938C0.046875 9.26562 0 9.125 0 8.9375V8.5625C0 8.42188 0.046875 8.28125 0.140625 8.1875C0.234375 8.09375 0.375 8 0.5625 8H4.17188L10.6875 0.734375C10.8281 0.59375 11.0156 0.5 11.2031 0.5C11.3906 0.5 11.5781 0.59375 11.7656 0.734375C11.9062 0.875 12 1.0625 12 1.25C12 1.4375 11.9062 1.625 11.8125 1.76562L6.1875 8H20.8125L15.1875 1.76562C15.0469 1.625 15 1.4375 15 1.25C15 1.0625 15.0469 0.875 15.2344 0.734375C15.375 0.59375 15.5625 0.5 15.75 0.5C15.9375 0.5 16.125 0.59375 16.3125 0.734375L22.8281 8H26.4375ZM22.7812 19.3438L24.1406 9.5H2.85938L4.21875 19.3438C4.21875 19.5312 4.3125 19.7188 4.45312 19.8125C4.59375 19.9531 4.78125 20 4.96875 20H22.0312C22.2188 20 22.3594 19.9531 22.5 19.8125C22.6406 19.7188 22.7344 19.5312 22.7812 19.3438ZM14.25 12.125C14.25 11.9375 14.1562 11.75 14.0156 11.6094C13.875 11.4688 13.6875 11.375 13.5 11.375C13.2656 11.375 13.0781 11.4688 12.9375 11.6094C12.7969 11.75 12.75 11.9375 12.75 12.125V17.375C12.75 17.6094 12.7969 17.7969 12.9375 17.9375C13.0781 18.0781 13.2656 18.125 13.5 18.125C13.6875 18.125 13.875 18.0781 14.0156 17.9375C14.1562 17.7969 14.25 17.6094 14.25 17.375V12.125ZM19.5 12.125C19.5 11.9375 19.4062 11.75 19.2656 11.6094C19.125 11.4688 18.9375 11.375 18.75 11.375C18.5156 11.375 18.3281 11.4688 18.1875 11.6094C18.0469 11.75 18 11.9375 18 12.125V17.375C18 17.6094 18.0469 17.7969 18.1875 17.9375C18.3281 18.0781 18.5156 18.125 18.75 18.125C18.9375 18.125 19.125 18.0781 19.2656 17.9375C19.4062 17.7969 19.5 17.6094 19.5 17.375V12.125ZM9 12.125C9 11.9375 8.90625 11.75 8.76562 11.6094C8.625 11.4688 8.4375 11.375 8.25 11.375C8.01562 11.375 7.82812 11.4688 7.6875 11.6094C7.54688 11.75 7.5 11.9375 7.5 12.125V17.375C7.5 17.6094 7.54688 17.7969 7.6875 17.9375C7.82812 18.0781 8.01562 18.125 8.25 18.125C8.4375 18.125 8.625 18.0781 8.76562 17.9375C8.90625 17.7969 9 17.6094 9 17.375V12.125Z"
                                    fill="#666666"
                                />
                            </svg>
                        </React.Fragment>
                    </NavbarLink>
                    <NavbarLink 
                        redirector="logout"
                        clickHandle={navbarLinkUpdate}
                        isActive={activeNavLink === "logout"}
                    >
                        <svg
                            viewBox="0 0 24 18"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M2.25 0C1.59375 0 1.07812 0.234375 0.65625 0.65625C0.1875 1.125 0 1.64062 0 2.25V15.75C0 16.4062 0.1875 16.9219 0.65625 17.3438C1.07812 17.8125 1.59375 18 2.25 18H8.4375C8.57812 18 8.71875 17.9531 8.8125 17.8594C8.90625 17.7656 9 17.625 9 17.4375V17.0625C9 16.9219 8.90625 16.7812 8.8125 16.6875C8.71875 16.5938 8.57812 16.5 8.4375 16.5H2.25C2.01562 16.5 1.82812 16.4531 1.6875 16.3125C1.54688 16.1719 1.5 15.9844 1.5 15.75V2.25C1.5 2.0625 1.54688 1.875 1.6875 1.73438C1.82812 1.59375 2.01562 1.5 2.25 1.5H8.4375C8.57812 1.5 8.71875 1.45312 8.8125 1.35938C8.90625 1.26562 9 1.125 9 0.9375V0.5625C9 0.421875 8.90625 0.28125 8.8125 0.1875C8.71875 0.09375 8.57812 0 8.4375 0H2.25ZM15.3281 0.890625C15.4219 0.796875 15.5625 0.75 15.7031 0.75C15.8438 0.75 15.9844 0.796875 16.125 0.890625L23.8594 8.57812C23.9531 8.71875 24 8.85938 24 9C24 9.1875 23.9531 9.28125 23.8594 9.375L16.125 17.1094C16.0312 17.2031 15.8906 17.25 15.75 17.25C15.5625 17.25 15.4219 17.2031 15.3281 17.0625L15 16.7344C14.8594 16.6406 14.8125 16.5469 14.8125 16.3594C14.8125 16.2188 14.8594 16.0781 15 15.9375L21.1875 9.79688H8.0625C7.875 9.79688 7.73438 9.75 7.64062 9.65625C7.54688 9.5625 7.5 9.42188 7.5 9.23438V8.76562C7.5 8.625 7.54688 8.48438 7.64062 8.39062C7.73438 8.29688 7.875 8.20312 8.0625 8.20312H21.1875L15 2.0625C14.8594 1.96875 14.8125 1.82812 14.8125 1.64062C14.8125 1.5 14.8594 1.35938 15 1.26562L15.3281 0.890625Z"
                                fill="#666666"
                            />
                        </svg>
                    </NavbarLink>
                    <HamburguerMenu />
                </ul>
            </div>
        </nav>
    );
}

export default withRouter(Navbar);